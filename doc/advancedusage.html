<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Chapter 4. Advanced Usage</title><meta name="generator" content="DocBook XSL Stylesheets V1.71.1" /><link rel="start" href="index.html" title="The Mutt E-Mail Client" /><link rel="up" href="index.html" title="The Mutt E-Mail Client" /><link rel="prev" href="configuration.html" title="Chapter 3. Configuration" /><link rel="next" href="mimesupport.html" title="Chapter 5. Mutt's MIME Support" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 4. Advanced Usage</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="configuration.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="mimesupport.html">Next</a></td></tr></table><hr /></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="advancedusage"></a>Chapter 4. Advanced Usage</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="advancedusage.html#regexp">1. Regular Expressions</a></span></dt><dt><span class="sect1"><a href="advancedusage.html#patterns">2. Patterns: Searching, Limiting and Tagging</a></span></dt><dd><dl><dt><span class="sect2"><a href="advancedusage.html#id472110">2.1. Pattern Modifier</a></span></dt><dt><span class="sect2"><a href="advancedusage.html#id472138">2.2. Simple Patterns</a></span></dt><dt><span class="sect2"><a href="advancedusage.html#id472302">2.3. Complex Patterns</a></span></dt><dt><span class="sect2"><a href="advancedusage.html#id472434">2.4. Searching by Date</a></span></dt></dl></dd><dt><span class="sect1"><a href="advancedusage.html#tags">3. Using Tags</a></span></dt><dt><span class="sect1"><a href="advancedusage.html#hooks">4. Using Hooks</a></span></dt><dd><dl><dt><span class="sect2"><a href="advancedusage.html#pattern-hook">4.1. Message Matching in Hooks</a></span></dt></dl></dd><dt><span class="sect1"><a href="advancedusage.html#query">5. External Address Queries</a></span></dt><dt><span class="sect1"><a href="advancedusage.html#mailbox-formats">6. Mailbox Formats</a></span></dt><dt><span class="sect1"><a href="advancedusage.html#shortcuts">7. Mailbox Shortcuts</a></span></dt><dt><span class="sect1"><a href="advancedusage.html#using-lists">8. Handling Mailing Lists</a></span></dt><dt><span class="sect1"><a href="advancedusage.html#editing-threads">9. Editing threads</a></span></dt><dd><dl><dt><span class="sect2"><a href="advancedusage.html#id473602">9.1. Linking threads</a></span></dt><dt><span class="sect2"><a href="advancedusage.html#id473618">9.2. Breaking threads</a></span></dt></dl></dd><dt><span class="sect1"><a href="advancedusage.html#dsn">10. Delivery Status Notification (DSN) Support</a></span></dt><dt><span class="sect1"><a href="advancedusage.html#urlview">11. Start a WWW Browser on URLs (EXTERNAL)</a></span></dt></dl></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="regexp"></a>1. Regular Expressions</h2></div></div></div><p>
All string patterns in Mutt including those in more complex
<a href="advancedusage.html#patterns" title="2. Patterns: Searching, Limiting and Tagging">patterns</a> must be specified
using regular expressions (regexp) in the ``POSIX extended'' syntax (which
is more or less the syntax used by egrep and GNU awk).  For your
convenience, we have included below a brief description of this syntax.
</p><p>
The search is case sensitive if the pattern contains at least one upper
case letter, and case insensitive otherwise. Note that ``\''
must be quoted if used for a regular expression in an initialization
command: ``\\''.
</p><p>
A regular expression is a pattern that describes a set of strings.
Regular expressions are constructed analogously to arithmetic
expressions, by using various operators to combine smaller expressions.
</p><p>
Note that the regular expression can be enclosed/delimited by either "
or ' which is useful if the regular expression includes a white-space
character.  See <a href="configuration.html#muttrc-syntax">Syntax of Initialization Files</a>
for more information on " and ' delimiter processing.  To match a
literal " or ' you must preface it with \ (backslash).
</p><p>
The fundamental building blocks are the regular expressions that match
a single character.  Most characters, including all letters and digits,
are regular expressions that match themselves.  Any metacharacter with
special meaning may be quoted by preceding it with a backslash.
</p><p>
The period ``.'' matches any single character.  The caret ``^'' and
the dollar sign ``$'' are metacharacters that respectively match
the empty string at the beginning and end of a line.
</p><p>
A list of characters enclosed by ``['' and ``]'' matches any
single character in that list; if the first character of the list
is a caret ``^'' then it matches any character <span class="bold"><strong>not</strong></span> in the
list.  For example, the regular expression <span class="bold"><strong>[0123456789]</strong></span>
matches any single digit.  A range of ASCII characters may be specified
by giving the first and last characters, separated by a hyphen
``-''.  Most metacharacters lose their special meaning inside
lists.  To include a literal ``]'' place it first in the list.
Similarly, to include a literal ``^'' place it anywhere but first.
Finally, to include a literal hyphen ``-'' place it last.
</p><p>
Certain named classes of characters are predefined.  Character classes
consist of ``[:'', a keyword denoting the class, and ``:]''.
The following classes are defined by the POSIX standard:
</p><p>
</p><div class="variablelist"><dl><dt><span class="term">[:alnum:]</span></dt><dd><p>
Alphanumeric characters.
</p></dd><dt><span class="term">[:alpha:]</span></dt><dd><p>
Alphabetic characters.
</p></dd><dt><span class="term">[:blank:]</span></dt><dd><p>
Space or tab characters.
</p></dd><dt><span class="term">[:cntrl:]</span></dt><dd><p>
Control characters.
</p></dd><dt><span class="term">[:digit:]</span></dt><dd><p>
Numeric characters.
</p></dd><dt><span class="term">[:graph:]</span></dt><dd><p>
Characters that are both printable and visible.  (A space is printable,
but not visible, while an ``a'' is both.)
</p></dd><dt><span class="term">[:lower:]</span></dt><dd><p>
Lower-case alphabetic characters.
</p></dd><dt><span class="term">[:print:]</span></dt><dd><p>
Printable characters (characters that are not control characters.)
</p></dd><dt><span class="term">[:punct:]</span></dt><dd><p>
Punctuation characters (characters that are not letter, digits, control
characters, or space characters).
</p></dd><dt><span class="term">[:space:]</span></dt><dd><p>
Space characters (such as space, tab and formfeed, to name a few).
</p></dd><dt><span class="term">[:upper:]</span></dt><dd><p>
Upper-case alphabetic characters.
</p></dd><dt><span class="term">[:xdigit:]</span></dt><dd><p>
Characters that are hexadecimal digits.
</p></dd></dl></div><p>
</p><p>
A character class is only valid in a regular expression inside the
brackets of a character list.  Note that the brackets in these
class names are part of the symbolic names, and must be included
in addition to the brackets delimiting the bracket list.  For
example, <span class="bold"><strong>[[:digit:]]</strong></span> is equivalent to
<span class="bold"><strong>[0-9]</strong></span>.
</p><p>
Two additional special sequences can appear in character lists.  These
apply to non-ASCII character sets, which can have single symbols (called
collating elements) that are represented with more than one character,
as well as several characters that are equivalent for collating or
sorting purposes:
</p><p>
</p><div class="variablelist"><dl><dt><span class="term">Collating Symbols</span></dt><dd><p>
A collating symbol is a multi-character collating element enclosed in
``[.'' and ``.]''.  For example, if ``ch'' is a collating
element, then <span class="bold"><strong>[[.ch.]]</strong></span> is a regexp that matches
this collating element, while <span class="bold"><strong>[ch]</strong></span> is a regexp that
matches either ``c'' or ``h''.
</p></dd><dt><span class="term">Equivalence Classes</span></dt><dd><p>
An equivalence class is a locale-specific name for a list of
characters that are equivalent. The name is enclosed in ``[=''
and ``=]''.  For example, the name ``e'' might be used to
represent all of ``è'' ``é'' and ``e''.  In this case,
<span class="bold"><strong>[[=e=]]</strong></span> is a regexp that matches any of
``è'', ``é'' and ``e''.
</p></dd></dl></div><p>
</p><p>
A regular expression matching a single character may be followed by one
of several repetition operators:
</p><p>
</p><div class="variablelist"><dl><dt><span class="term">?</span></dt><dd><p>
The preceding item is optional and matched at most once.
</p></dd><dt><span class="term">*</span></dt><dd><p>
The preceding item will be matched zero or more times.
</p></dd><dt><span class="term">+</span></dt><dd><p>
The preceding item will be matched one or more times.
</p></dd><dt><span class="term">{n}</span></dt><dd><p>
The preceding item is matched exactly <span class="emphasis"><em>n</em></span> times.
</p></dd><dt><span class="term">{n,}</span></dt><dd><p>
The preceding item is matched <span class="emphasis"><em>n</em></span> or more times.
</p></dd><dt><span class="term">{,m}</span></dt><dd><p>
The preceding item is matched at most <span class="emphasis"><em>m</em></span> times.
</p></dd><dt><span class="term">{n,m}</span></dt><dd><p>
The preceding item is matched at least <span class="emphasis"><em>n</em></span> times, but no more than
<span class="emphasis"><em>m</em></span> times.
</p></dd></dl></div><p>
</p><p>
Two regular expressions may be concatenated; the resulting regular
expression matches any string formed by concatenating two substrings
that respectively match the concatenated subexpressions.
</p><p>
Two regular expressions may be joined by the infix operator ``|'';
the resulting regular expression matches any string matching either
subexpression.
</p><p>
Repetition takes precedence over concatenation, which in turn takes
precedence over alternation.  A whole subexpression may be enclosed in
parentheses to override these precedence rules.
</p><p>
<span class="bold"><strong>Note:</strong></span> If you compile Mutt with the GNU <span class="emphasis"><em>rx</em></span> package, the
following operators may also be used in regular expressions:
</p><p>
</p><div class="variablelist"><dl><dt><span class="term">\\y</span></dt><dd><p>
Matches the empty string at either the beginning or the end of a word.
</p></dd><dt><span class="term">\\B</span></dt><dd><p>
Matches the empty string within a word.
</p></dd><dt><span class="term">\\&lt;</span></dt><dd><p>
Matches the empty string at the beginning of a word.
</p></dd><dt><span class="term">\\&gt;</span></dt><dd><p>
Matches the empty string at the end of a word.
</p></dd><dt><span class="term">\\w</span></dt><dd><p>
Matches any word-constituent character (letter, digit, or underscore).
</p></dd><dt><span class="term">\\W</span></dt><dd><p>
Matches any character that is not word-constituent.
</p></dd><dt><span class="term">\\`</span></dt><dd><p>
Matches the empty string at the beginning of a buffer (string).
</p></dd><dt><span class="term">\\'</span></dt><dd><p>
Matches the empty string at the end of a buffer.
</p></dd></dl></div><p>
</p><p>
Please note however that these operators are not defined by POSIX, so
they may or may not be available in stock libraries on various systems.
</p></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="patterns"></a>2. Patterns: Searching, Limiting and Tagging</h2></div></div></div><p>
Many of Mutt's commands allow you to specify a pattern to match
(limit, tag-pattern, delete-pattern, etc.). <a href="advancedusage.html#tab-patterns" title="Table 4.1. Pattern modifiers">Table 4.1, “Pattern modifiers”</a>
shows several ways to select messages.
</p><p>

</p><div class="table"><a id="tab-patterns"></a><p class="title"><b>Table 4.1. Pattern modifiers</b></p><div class="table-contents"><table summary="Pattern modifiers" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Pattern modifier</th><th>Description</th></tr></thead><tbody><tr><td>~A</td><td>all messages</td></tr><tr><td>~b EXPR</td><td>messages which contain EXPR in the message body</td></tr><tr><td>=b STRING</td><td>messages which contain STRING in the message body. If IMAP is enabled, searches for STRING on the server, rather than downloading each message and searching it locally.</td></tr><tr><td>~B EXPR</td><td>messages which contain EXPR in the whole message</td></tr><tr><td>~c EXPR</td><td>messages carbon-copied to EXPR</td></tr><tr><td>%c GROUP</td><td>messages carbon-copied to any member of GROUP</td></tr><tr><td>~C EXPR</td><td>message is either to: or cc: EXPR</td></tr><tr><td>%C GROUP</td><td>message is either to: or cc: to any member of GROUP</td></tr><tr><td>~d [MIN]-[MAX]</td><td>messages with ``date-sent'' in a Date range</td></tr><tr><td>~D</td><td>deleted messages</td></tr><tr><td>~e EXPR</td><td>message which contains EXPR in the ``Sender'' field</td></tr><tr><td>%e GROUP</td><td>message which contain a member of GROUP in the ``Sender'' field</td></tr><tr><td>~E</td><td>expired messages</td></tr><tr><td>~F</td><td>flagged messages</td></tr><tr><td>~f EXPR</td><td>messages originating from EXPR</td></tr><tr><td>%f GROUP</td><td>messages originating from any member of GROUP</td></tr><tr><td>~g</td><td>cryptographically signed messages</td></tr><tr><td>~G</td><td>cryptographically encrypted messages</td></tr><tr><td>~h EXPR</td><td>messages which contain EXPR in the message header</td></tr><tr><td>~H EXPR</td><td>messages with a spam attribute matching EXPR</td></tr><tr><td>~i EXPR</td><td>message which match EXPR in the ``Message-ID'' field</td></tr><tr><td>~k</td><td>message contains PGP key material</td></tr><tr><td>~L EXPR</td><td>message is either originated or received by EXPR</td></tr><tr><td>%L GROUP</td><td>message is either originated or received by any member of GROUP</td></tr><tr><td>~l</td><td>message is addressed to a known mailing list</td></tr><tr><td>~m [MIN]-[MAX]</td><td>message in the range MIN to MAX *)</td></tr><tr><td>~n [MIN]-[MAX]</td><td>messages with a score in the range MIN to MAX *)</td></tr><tr><td>~N</td><td>new messages</td></tr><tr><td>~O</td><td>old messages</td></tr><tr><td>~p</td><td>message is addressed to you (consults alternates)</td></tr><tr><td>~P</td><td>message is from you (consults alternates)</td></tr><tr><td>~Q</td><td>messages which have been replied to</td></tr><tr><td>~r [MIN]-[MAX]</td><td>messages with ``date-received'' in a Date range</td></tr><tr><td>~R</td><td>read messages</td></tr><tr><td>~s EXPR</td><td>messages having EXPR in the ``Subject'' field.</td></tr><tr><td>~S</td><td>superseded messages</td></tr><tr><td>~t EXPR</td><td>messages addressed to EXPR</td></tr><tr><td>~T</td><td>tagged messages</td></tr><tr><td>~u</td><td>message is addressed to a subscribed mailing list</td></tr><tr><td>~U</td><td>unread messages</td></tr><tr><td>~v</td><td>message is part of a collapsed thread.</td></tr><tr><td>~V</td><td>cryptographically verified messages</td></tr><tr><td>~x EXPR</td><td>messages which contain EXPR in the `References' field</td></tr><tr><td>~X [MIN]-[MAX]</td><td>messages with MIN to MAX attachments *)</td></tr><tr><td>~y EXPR</td><td>messages which contain EXPR in the `X-Label' field</td></tr><tr><td>~z [MIN]-[MAX]</td><td>messages with a size in the range MIN to MAX *)</td></tr><tr><td>~=</td><td>duplicated messages (see $duplicate_threads)</td></tr><tr><td>~$</td><td>unreferenced messages (requires threaded view)</td></tr><tr><td>~(PATTERN)</td><td>messages in threads
containing messages matching a certain	pattern, e.g. all
threads containing messages from you: ~(~P)</td></tr></tbody></table></div></div><p><br class="table-break" />

</p><p>
Where EXPR is a
<a href="advancedusage.html#regexp" title="1. Regular Expressions">regular expression</a>.  Special attention has to be
made when using regular expressions inside of patterns.  Specifically,
Mutt's parser for these patterns will strip one level of backslash (\),
which is normally used for quoting.  If it is your intention to use a
backslash in the regular expression, you will need to use two backslashes
instead (\\). You can force mutt to treat EXPR as a simple string
instead of a regular expression by using = instead of ˜ in the
pattern name. For example, =b *.* will find all messages that contain
the literal string '*.*'. Simple string matches are less powerful than
regular expressions but can be considerably faster. This is especially
true for IMAP folders, because string matches can be performed on the
server instead of by fetching every message. IMAP treats =h specially:
it must be of the form "header: substring" and will not partially
match header names. The substring part may be omitted if you simply
wish to find messages containing a particular header without regard to
its value.
</p><p>
*) The forms <code class="literal">&lt;[MAX]</code>, <code class="literal">&gt;[MIN]</code>,
<code class="literal">[MIN]-</code> and <code class="literal">-[MAX]</code>
are allowed, too.
</p><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id472110"></a>2.1. Pattern Modifier</h3></div></div></div><p>
Note that patterns matching 'lists' of addresses (notably c,C,p,P and t)
match if there is at least one match in the whole list. If you want to
make sure that all elements of that list match, you need to prefix your
pattern with ^.
This example matches all mails which only has recipients from Germany.
</p><p>

</p><pre class="screen">
^~C \.de$
</pre><p>

</p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id472138"></a>2.2. Simple Patterns</h3></div></div></div><p>
Mutt supports two versions of so called ``simple searches'' which are
issued if the query entered for searching, limiting and similar
operations does not seem to be a valid pattern (i.e. it does not contain
one of these characters: ``~'', ``='' or ``%''). If the query is
supposed to contain one of these special characters, they must be escaped
by prepending a backslash (``\'').
</p><p>
The first type is by checking whether the query string equals
a keyword case-insensitively from <a href="advancedusage.html#tab-simplesearch-keywords" title="Table 4.2. Simple search keywords">Table 4.2, “Simple search keywords”</a>:
If that is the case, Mutt will use the shown pattern modifier instead.
If a keyword would conflict with your search keyword, you need to turn
it into a regular expression to avoid matching the keyword table. For
example, if you want to find all messages matching ``<code class="literal">flag</code>''
(using <a href="reference.html#simple-search" title="3.263. simple_search">$simple_search</a>,
see below but not meaning flagged messages) simply search for
``<code class="literal">[f]lag</code>''.
</p><div class="table"><a id="tab-simplesearch-keywords"></a><p class="title"><b>Table 4.2. Simple search keywords</b></p><div class="table-contents"><table summary="Simple search keywords" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Keyword</th><th>Pattern modifier</th></tr></thead><tbody><tr><td>all</td><td>~A</td></tr><tr><td>.</td><td>~A</td></tr><tr><td>^</td><td>~A</td></tr><tr><td>del</td><td>~D</td></tr><tr><td>flag</td><td>~F</td></tr><tr><td>new</td><td>~N</td></tr><tr><td>old</td><td>~O</td></tr><tr><td>repl</td><td>~Q</td></tr><tr><td>read</td><td>~R</td></tr><tr><td>tag</td><td>~T</td></tr><tr><td>unread</td><td>~U</td></tr></tbody></table></div></div><br class="table-break" /><p>
The second type of simple search is to build a complex search
pattern using <a href="reference.html#simple-search" title="3.263. simple_search">$simple_search</a>
as a template. Mutt will insert your query properly quoted and search
for the composed complex query.
</p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id472302"></a>2.3. Complex Patterns</h3></div></div></div><p>
Logical AND is performed by specifying more than one criterion.  For
example:
</p><p>

</p><pre class="screen">
~t mutt ~f elkins
</pre><p>

</p><p>
would select messages which contain the word ``mutt'' in the list of
recipients <span class="bold"><strong>and</strong></span> that have the word ``elkins'' in the ``From'' header
field.
</p><p>
Mutt also recognizes the following operators to create more complex search
patterns:
</p><p>

</p><div class="itemizedlist"><ul type="disc"><li><p>
! -- logical NOT operator
</p></li><li><p>
| -- logical OR operator
</p></li><li><p>
() -- logical grouping operator
</p></li></ul></div><p>

</p><p>
Here is an example illustrating a complex search pattern.  This pattern will
select all messages which do not contain ``mutt'' in the ``To'' or ``Cc''
field and which are from ``elkins''.
</p><p>

</p><pre class="screen">
!(~t mutt|~c mutt) ~f elkins
</pre><p>

</p><p>
Here is an example using white space in the regular expression (note
the ' and " delimiters).  For this to match, the mail's subject must
match the ``^Junk +From +Me$'' and it must be from either ``Jim +Somebody''
or ``Ed +SomeoneElse'':
</p><p>

</p><pre class="screen">
 '~s "^Junk +From +Me$" ~f ("Jim +Somebody"|"Ed +SomeoneElse")'
</pre><p>

</p><p>
Note that if a regular expression contains parenthesis, or a vertical bar
("|"), you <span class="bold"><strong>must</strong></span> enclose the expression in double or single quotes since
those characters are also used to separate different parts of Mutt's
pattern language.  For example,
</p><p>

</p><pre class="screen">
~f "me@(mutt\.org|cs\.hmc\.edu)"
</pre><p>

</p><p>
Without the quotes, the parenthesis wouldn't end.
This would be seperated to two OR'd patterns: <span class="emphasis"><em>˜f me@(mutt\.org</em></span>
and <span class="emphasis"><em>cs\.hmc\.edu)</em></span>. They are never what you want.
</p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id472434"></a>2.4. Searching by Date</h3></div></div></div><p>
Mutt supports two types of dates, <span class="emphasis"><em>absolute</em></span> and <span class="emphasis"><em>relative</em></span>.
</p><p>
<span class="bold"><strong>Absolute</strong></span>.  Dates <span class="bold"><strong>must</strong></span> be in DD/MM/YY format (month and year are
optional, defaulting to the current month and year).  An example of a valid
range of dates is:
</p><p>

</p><pre class="screen">
Limit to messages matching: ~d 20/1/95-31/10
</pre><p>

</p><p>
If you omit the minimum (first) date, and just specify ``-DD/MM/YY'', all
messages <span class="emphasis"><em>before</em></span> the given date will be selected.  If you omit the maximum
(second) date, and specify ``DD/MM/YY-'', all messages <span class="emphasis"><em>after</em></span> the given
date will be selected.  If you specify a single date with no dash (``-''),
only messages sent on the given date will be selected. 
</p><p>
<span class="bold"><strong>Error Margins</strong></span>.  You can add error margins to absolute dates.
An error margin is a sign (+ or -), followed by a digit, followed by
one of the units in <a href="advancedusage.html#tab-date-units" title="Table 4.3. Date units">Table 4.3, “Date units”</a>. As a special case, you can replace the
sign by a ``*'' character, which is equivalent to giving identical plus and minus error margins.
</p><div class="table"><a id="tab-date-units"></a><p class="title"><b>Table 4.3. Date units</b></p><div class="table-contents"><table summary="Date units" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Unit</th><th>Description</th></tr></thead><tbody><tr><td>y</td><td>Years</td></tr><tr><td>m</td><td>Months</td></tr><tr><td>w</td><td>Weeks</td></tr><tr><td>d</td><td>Days</td></tr></tbody></table></div></div><br class="table-break" /><p>
Example: To select any messages two weeks around January 15, 2001,
you'd use the following pattern: 

</p><pre class="screen">
 
Limit to messages matching: ~d 15/1/2001*2w
</pre><p>

</p><p>
<span class="bold"><strong>Relative</strong></span>.  This type of date is relative to the current date, and may
be specified as:

</p><div class="itemizedlist"><ul type="disc"><li><p>
&gt;<span class="emphasis"><em>offset</em></span> (messages older than <span class="emphasis"><em>offset</em></span> units)
</p></li><li><p>
&lt;<span class="emphasis"><em>offset</em></span> (messages newer than <span class="emphasis"><em>offset</em></span> units)
</p></li><li><p>
=<span class="emphasis"><em>offset</em></span> (messages exactly <span class="emphasis"><em>offset</em></span> units old)
</p></li></ul></div><p>

</p><p>
<span class="emphasis"><em>offset</em></span> is specified as a positive number with one of the units from <a href="advancedusage.html#tab-date-units" title="Table 4.3. Date units">Table 4.3, “Date units”</a>.
</p><p>
Example: to select messages less than 1 month old, you would use

</p><pre class="screen">
Limit to messages matching: ~d &lt;1m
</pre><p>

</p><p>
<span class="bold"><strong>Note:</strong></span> all dates used when searching are relative to the
<span class="bold"><strong>local</strong></span> time zone, so unless you change the setting of your <a href="reference.html#index-format" title="3.100. index_format">$index_format</a> to include a
<code class="literal">%[...]</code> format, these are <span class="bold"><strong>not</strong></span> the dates shown
in the main index.
</p></div></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="tags"></a>3. Using Tags</h2></div></div></div><p>
Sometimes it is desirable to perform an operation on a group of
messages all at once rather than one at a time.  An example might be
to save messages to a mailing list to a separate folder, or to
delete all messages with a given subject.  To tag all messages
matching a pattern, use the tag-pattern function, which is bound to
``shift-T'' by default.  Or you can select individual messages by
hand using the ``tag-message'' function, which is bound to ``t'' by
default.  See <a href="advancedusage.html#patterns" title="2. Patterns: Searching, Limiting and Tagging">patterns</a> for Mutt's pattern
matching syntax.
</p><p>
Once you have tagged the desired messages, you can use the
``tag-prefix'' operator, which is the ``;'' (semicolon) key by default.
When the ``tag-prefix'' operator is used, the <span class="bold"><strong>next</strong></span> operation will
be applied to all tagged messages if that operation can be used in that
manner.  If the <a href="reference.html#auto-tag" title="3.18. auto_tag">$auto_tag</a>
variable is set, the next operation applies to the tagged messages
automatically, without requiring the ``tag-prefix''.
</p><p>
In <a href="configuration.html#macro" title="7. Keyboard macros">macros</a> or <a href="configuration.html#push" title="22. Adding key sequences to the keyboard buffer">push</a> commands,
you can use the ``tag-prefix-cond'' operator.  If there are no tagged
messages, mutt will "eat" the rest of the macro to abort it's execution.
Mutt will stop "eating" the macro when it encounters the ``end-cond''
operator;  after this operator the rest of the macro will be executed as
normal.
</p></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="hooks"></a>4. Using Hooks</h2></div></div></div><p>
A <span class="emphasis"><em>hook</em></span> is a concept borrowed from the EMACS editor which allows you to
execute arbitrary commands before performing some operation.  For example,
you may wish to tailor your configuration based upon which mailbox you are
reading, or to whom you are sending mail.  In the Mutt world, a <span class="emphasis"><em>hook</em></span>
consists of a <a href="advancedusage.html#regexp" title="1. Regular Expressions">regular expression</a> or
<a href="advancedusage.html#patterns" title="2. Patterns: Searching, Limiting and Tagging">pattern</a> along with a
configuration option/command.  See

</p><div class="itemizedlist"><ul type="disc"><li><p>
<a href="configuration.html#folder-hook" title="6. Setting variables based upon mailbox">folder-hook</a>
</p></li><li><p>
<a href="configuration.html#send-hook" title="19. Change settings based upon message recipients">send-hook</a>
</p></li><li><p>
<a href="configuration.html#message-hook" title="20. Change settings before formatting a message">message-hook</a>
</p></li><li><p>
<a href="configuration.html#save-hook" title="16. Specify default save mailbox">save-hook</a>
</p></li><li><p>
<a href="configuration.html#mbox-hook" title="12. Using Multiple spool mailboxes">mbox-hook</a>
</p></li><li><p>
<a href="configuration.html#fcc-hook" title="17. Specify default Fcc: mailbox when composing">fcc-hook</a>
</p></li><li><p>
<a href="configuration.html#fcc-save-hook" title="18. Specify default save filename and default Fcc: mailbox at once">fcc-save-hook</a>
</p></li></ul></div><p>

for specific details on each type of <span class="emphasis"><em>hook</em></span> available.
</p><p>
<span class="bold"><strong>Note:</strong></span> if a hook changes configuration settings, these changes remain
effective until the end of the current mutt session. As this is generally
not desired, a default hook needs to be added before all other hooks to
restore configuration defaults. Here is an example with send-hook and the
my_hdr directive:
</p><p>

</p><pre class="screen">
send-hook . 'unmy_hdr From:'
send-hook ~C'^b@b\.b$' my_hdr from: c@c.c
</pre><p>

</p><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="pattern-hook"></a>4.1. Message Matching in Hooks</h3></div></div></div><p>
Hooks that act upon messages (<code class="literal">message-hook, reply-hook,
send-hook, send2-hook, save-hook, fcc-hook</code>) are evaluated in a
slightly different manner. For the other
types of hooks, a <a href="advancedusage.html#regexp" title="1. Regular Expressions">regular expression</a> is
sufficient.  But in dealing with messages a finer grain of control is
needed for matching since for different purposes you want to match
different criteria.
</p><p>
Mutt allows the use of the <a href="advancedusage.html#patterns" title="2. Patterns: Searching, Limiting and Tagging">search pattern</a>
language for matching messages in hook commands.  This works in
exactly the same way as it would when <span class="emphasis"><em>limiting</em></span> or
<span class="emphasis"><em>searching</em></span> the mailbox, except that you are restricted to those
operators which match information mutt extracts from the header of
the message (i.e., from, to, cc, date, subject, etc.).
</p><p>
For example, if you wanted to set your return address based upon sending
mail to a specific address, you could do something like:

</p><pre class="screen">
send-hook '~t ^me@cs\.hmc\.edu$' 'my_hdr From: Mutt User &lt;user@host&gt;'
</pre><p>

which would execute the given command when sending mail to
<span class="emphasis"><em>me@cs.hmc.edu</em></span>.
</p><p>
However, it is not required that you write the pattern to match using the
full searching language.  You can still specify a simple <span class="emphasis"><em>regular
expression</em></span> like the other hooks, in which case Mutt will translate your
pattern into the full language, using the translation specified by the 
<a href="reference.html#default-hook" title="3.41. default_hook">$default_hook</a> variable.  The
pattern is translated at the time the hook is declared, so the value of 
<a href="reference.html#default-hook" title="3.41. default_hook">$default_hook</a> that is in effect
at that time will be used.
</p></div></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="query"></a>5. External Address Queries</h2></div></div></div><p>
Mutt supports connecting to external directory databases such as LDAP,
ph/qi, bbdb, or NIS through a wrapper script which connects to mutt
using a simple interface.  Using the <a href="reference.html#query-command" title="3.231. query_command">$query_command</a> variable, you specify the wrapper
command to use.  For example:
</p><p>

</p><pre class="screen">
set query_command = "mutt_ldap_query.pl '%s'"
</pre><p>

</p><p>
The wrapper script should accept the query on the command-line.  It
should return a one line message, then each matching response on a
single line, each line containing a tab separated address then name then
some other optional information.  On error, or if there are no matching
addresses, return a non-zero exit code and a one line error message.
</p><p>
An example multiple response output:

</p><pre class="screen">
Searching database ... 20 entries ... 3 matching:
me@cs.hmc.edu           Michael Elkins  mutt dude
blong@fiction.net       Brandon Long    mutt and more
roessler@does-not-exist.org        Thomas Roessler mutt pgp
</pre><p>

</p><p>
There are two mechanisms for accessing the query function of mutt.  One
is to do a query from the index menu using the query function (default: Q).
This will prompt for a query, then bring up the query menu which will
list the matching responses.  From the query menu, you can select
addresses to create aliases, or to mail.  You can tag multiple addresses
to mail, start a new query, or have a new query appended to the current
responses.
</p><p>
The other mechanism for accessing the query function is for address
completion, similar to the alias completion.  In any prompt for address
entry, you can use the complete-query function (default: ^T) to run a
query based on the current address you have typed.  Like aliases, mutt
will look for what you have typed back to the last space or comma.  If
there is a single response for that query, mutt will expand the address
in place.  If there are multiple responses, mutt will activate the query
menu.  At the query menu, you can select one or more addresses to be
added to the prompt.
</p></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="mailbox-formats"></a>6. Mailbox Formats</h2></div></div></div><p>
Mutt supports reading and writing of four different mailbox formats:
mbox, MMDF, MH and Maildir.  The mailbox type is autodetected, so there
is no need to use a flag for different mailbox types.  When creating new
mailboxes, Mutt uses the default specified with the <a href="reference.html#mbox-type" title="3.116. mbox_type">$mbox_type</a> variable.
</p><p>
<span class="bold"><strong>mbox</strong></span>.  This is the most widely used mailbox format for UNIX.  All
messages are stored in a single file.  Each message has a line of the form:
</p><p>

</p><pre class="screen">
From me@cs.hmc.edu Fri, 11 Apr 1997 11:44:56 PST
</pre><p>

</p><p>
to denote the start of a new message (this is often referred to as the
``From_'' line).
</p><p>
<span class="bold"><strong>MMDF</strong></span>.  This is a variant of the <span class="emphasis"><em>mbox</em></span> format.  Each message is
surrounded by lines containing ``^A^A^A^A'' (four control-A's).
</p><p>
<span class="bold"><strong>MH</strong></span>. A radical departure from <span class="emphasis"><em>mbox</em></span> and <span class="emphasis"><em>MMDF</em></span>, a mailbox
consists of a directory and each message is stored in a separate file.
The filename indicates the message number (however, this is may not
correspond to the message number Mutt displays). Deleted messages are
renamed with a comma (,) prepended to the filename. <span class="bold"><strong>Note:</strong></span> Mutt
detects this type of mailbox by looking for either <code class="literal">.mh_sequences</code>
or <code class="literal">.xmhcache</code> (needed to distinguish normal directories from MH
mailboxes).
</p><p>
<span class="bold"><strong>Maildir</strong></span>.  The newest of the mailbox formats, used by the Qmail MTA (a
replacement for sendmail).  Similar to <span class="emphasis"><em>MH</em></span>, except that it adds three
subdirectories of the mailbox: <span class="emphasis"><em>tmp</em></span>, <span class="emphasis"><em>new</em></span> and <span class="emphasis"><em>cur</em></span>.  Filenames
for the messages are chosen in such a way they are unique, even when two
programs are writing the mailbox over NFS, which means that no file locking
is needed.
</p></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="shortcuts"></a>7. Mailbox Shortcuts</h2></div></div></div><p>
There are a number of built in shortcuts which refer to specific mailboxes.
These shortcuts can be used anywhere you are prompted for a file or mailbox
path.
</p><p>

</p><div class="itemizedlist"><ul type="disc"><li><p>
! -- refers to your <a href="reference.html#spoolfile" title="3.276. spoolfile">$spoolfile</a> (incoming) mailbox
</p></li><li><p>
&gt; -- refers to your <a href="reference.html#mbox" title="3.115. mbox">$mbox</a> file
</p></li><li><p>
&lt; -- refers to your <a href="reference.html#record" title="3.239. record">$record</a> file
</p></li><li><p>
^ -- refers to the current mailbox
</p></li><li><p>
- or !! -- refers to the file you've last visited
</p></li><li><p>
˜ -- refers to your home directory
</p></li><li><p>
= or + -- refers to your <a href="reference.html#folder" title="3.58. folder">$folder</a> directory
</p></li><li><p>
@<span class="emphasis"><em>alias</em></span> -- refers to the <a href="configuration.html#save-hook" title="16. Specify default save mailbox">default save folder</a> as determined by the address of the alias
</p></li></ul></div><p>

</p></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="using-lists"></a>8. Handling Mailing Lists</h2></div></div></div><p>
Mutt has a few configuration options that make dealing with large
amounts of mail easier.  The first thing you must do is to let Mutt
know what addresses you consider to be mailing lists (technically
this does not have to be a mailing list, but that is what it is most
often used for), and what lists you are subscribed to.  This is
accomplished through the use of the <a href="configuration.html#lists" title="11. Mailing lists">lists and subscribe</a> commands in your muttrc.
</p><p>
Now that Mutt knows what your mailing lists are, it can do several
things, the first of which is the ability to show the name of a list
through which you received a message (i.e., of a subscribed list) in
the <span class="emphasis"><em>index</em></span> menu display.  This is useful to distinguish between
personal and list mail in the same mailbox.  In the <a href="reference.html#index-format" title="3.100. index_format">$index_format</a> variable, the escape ``%L''
will return the string ``To &lt;list&gt;'' when ``list'' appears in the
``To'' field, and ``Cc &lt;list&gt;'' when it appears in the ``Cc''
field (otherwise it returns the name of the author).
</p><p>
Often times the ``To'' and ``Cc'' fields in mailing list messages
tend to get quite large. Most people do not bother to remove the
author of the message they are reply to from the list, resulting in
two or more copies being sent to that person.  The ``list-reply''
function, which by default is bound to ``L'' in the <span class="emphasis"><em>index</em></span> menu
and <span class="emphasis"><em>pager</em></span>, helps reduce the clutter by only replying to the
known mailing list addresses instead of all recipients (except as
specified by <code class="literal">Mail-Followup-To</code>, see below).
</p><p>
Mutt also supports the <code class="literal">Mail-Followup-To</code> header.  When you send
a message to a list of recipients which includes one or several
subscribed mailing lists, and if the <a href="reference.html#followup-to" title="3.60. followup_to">$followup_to</a> option is set, mutt will generate
a Mail-Followup-To header which contains all the recipients to whom
you send this message, but not your address. This indicates that
group-replies or list-replies (also known as ``followups'') to this
message should only be sent to the original recipients of the
message, and not separately to you - you'll receive your copy through
one of the mailing lists you are subscribed to.
</p><p>
Conversely, when group-replying or list-replying to a message which
has a <code class="literal">Mail-Followup-To</code> header, mutt will respect this header if
the <a href="reference.html#honor-followup-to" title="3.79. honor_followup_to">$honor_followup_to</a> configuration
variable is set.  Using list-reply will in this case also make sure
that the reply goes to the mailing list, even if it's not specified
in the list of recipients in the <code class="literal">Mail-Followup-To</code>.
</p><p>
Note that, when header editing is enabled, you can create a
<code class="literal">Mail-Followup-To</code> header manually.  Mutt will only auto-generate
this header if it doesn't exist when you send the message.
</p><p>
The other method some mailing list admins use is to generate a
``Reply-To'' field which points back to the mailing list address rather
than the author of the message.  This can create problems when trying
to reply directly to the author in private, since most mail clients
will automatically reply to the address given in the ``Reply-To''
field.  Mutt uses the <a href="reference.html#reply-to" title="3.242. reply_to">$reply_to</a>
variable to help decide which address to use.  If set to <span class="emphasis"><em>ask-yes</em></span> or
<span class="emphasis"><em>ask-no</em></span>, you will be
prompted as to whether or not you would like to use the address given in
the ``Reply-To'' field, or reply directly to the address given in the
``From'' field.  When set to <span class="emphasis"><em>yes</em></span>, the ``Reply-To'' field will be used when
present.
</p><p>
The ``X-Label:'' header field can be used to further identify mailing
lists or list subject matter (or just to annotate messages
individually).  The <a href="reference.html#index-format" title="3.100. index_format">$index_format</a> variable's ``%y'' and
``%Y'' escapes can be used to expand ``X-Label:'' fields in the
index, and Mutt's pattern-matcher can match regular expressions to
``X-Label:'' fields with the ``˜y'' selector.  ``X-Label:'' is not a
standard message header field, but it can easily be inserted by procmail
and other mail filtering agents.
</p><p>
Lastly, Mutt has the ability to <a href="reference.html#sort" title="3.270. sort">sort</a> the mailbox into
<a href="gettingstarted.html#threads" title="3.3. Threaded Mode">threads</a>.  A thread is a group of messages which all relate to the same
subject.  This is usually organized into a tree-like structure where a
message and all of its replies are represented graphically.  If you've ever
used a threaded news client, this is the same concept.  It makes dealing
with large volume mailing lists easier because you can easily delete
uninteresting threads and quickly find topics of value.
</p></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="editing-threads"></a>9. Editing threads</h2></div></div></div><p>
Mutt has the ability to dynamically restructure threads that are broken
either by misconfigured software or bad behavior from some
correspondents. This allows to clean your mailboxes formats) from these
annoyances which make it hard to follow a discussion.
</p><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id473602"></a>9.1. Linking threads</h3></div></div></div><p>
Some mailers tend to "forget" to correctly set the "In-Reply-To:" and
"References:" headers when replying to a message. This results in broken
discussions because Mutt has not enough information to guess the correct
threading.
You can fix this by tagging the reply, then moving to the parent message
and using the ``link-threads'' function (bound to &amp; by default). The
reply will then be connected to this "parent" message.
</p><p>
You can also connect multiple children at once, tagging them and using the
tag-prefix command (';') or the auto_tag option.
</p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id473618"></a>9.2. Breaking threads</h3></div></div></div><p>
On mailing lists, some people are in the bad habit of starting a new
discussion by hitting "reply" to any message from the list and changing
the subject to a totally unrelated one.
You can fix such threads by using the ``break-thread'' function (bound
by default to #), which will turn the subthread starting from the
current message into a whole different thread.
</p></div></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="dsn"></a>10. Delivery Status Notification (DSN) Support</h2></div></div></div><p>
RFC1894 defines a set of MIME content types for relaying information
about the status of electronic mail messages.  These can be thought of as
``return receipts.''
</p><p>
To support DSN, there are two variables. <a href="reference.html#dsn-notify" title="3.47. dsn_notify">$dsn_notify</a> is used to request receipts for
different results (such as failed message, message delivered, etc.).
<a href="reference.html#dsn-return" title="3.48. dsn_return">$dsn_return</a> requests how much
of your message should be returned with the receipt (headers or full
message).
</p><p>
When using <a href="reference.html#sendmail" title="3.257. sendmail">$sendmail</a> for mail
delivery, you need to use either Berkeley sendmail 8.8.x (or greater) a MTA
supporting DSN command line options compatible to Sendmail: The -N and -R
options can be used by the mail client to make requests as to what type of
status messages should be returned. Please consider your MTA documentation
whether DSN is supported.
</p><p>
For SMTP delivery using <a href="reference.html#smtp-url" title="3.269. smtp_url">$smtp_url</a>, it depends on the
capabilities announced by the server whether mutt will attempt to
request DSN or not.
</p></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="urlview"></a>11. Start a WWW Browser on URLs (EXTERNAL)</h2></div></div></div><p>
If a message contains URLs (<span class="emphasis"><em>unified resource locator</em></span> = address in the
WWW space like <span class="emphasis"><em>http://www.mutt.org/</em></span>), it is efficient to get
a menu with all the URLs and start a WWW browser on one of them.  This
functionality is provided by the external urlview program which can be
retrieved at <a href="ftp://ftp.mutt.org/mutt/contrib/" target="_top">ftp://ftp.mutt.org/mutt/contrib/</a> and the configuration commands:

</p><pre class="screen">
macro index \cb |urlview\n
macro pager \cb |urlview\n
</pre><p>

</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="configuration.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="mimesupport.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 3. Configuration </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 5. Mutt's MIME Support</td></tr></table></div></body></html>
